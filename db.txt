create database KidMartStore
use KidMartStore

CREATE TABLE Customer
(
  ID_Customer INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
  Username NVARCHAR(50) NOT NULL,
  Email VARCHAR(100) NOT NULL,
  Password VARCHAR(100) NOT NULL,
  Phone VARCHAR(15) NOT NULL,
  Address VARCHAR(255) ,
  Gender NVARCHAR(10) ,
  Avarta VARCHAR(255),
);

CREATE TABLE Category
(
  ID_Category INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
  Name_Category NVARCHAR(50) NOT NULL
);

CREATE TABLE Product
(
  ID_Product INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
  ID_Category INT NOT NULL,
  Name NVARCHAR(100) NOT NULL,
  Price DECIMAL(10, 2) NOT NULL,
  Quantity INT NOT NULL,
  Description TEXT,
  Image VARCHAR(255),
  FOREIGN KEY (ID_Category) REFERENCES Category(ID_Category)
);

CREATE TABLE Cart
(
  ID_Cart INT NOT NULL IDENTITY(1000,1) PRIMARY KEY,
  ID_Customer INT NOT NULL,
  FOREIGN KEY (ID_Customer) REFERENCES Customer(ID_Customer)
);

CREATE TABLE Detail_Cart
(
  ID_Detail_Cart INT NOT NULL PRIMARY KEY,
  ID_Cart INT NOT NULL,
  ID_Product INT NOT NULL,
  Quantity INT NOT NULL,
  FOREIGN KEY (ID_Cart) REFERENCES Cart(ID_Cart)
);

CREATE TABLE Promotion
(
  ID_Sale INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
  Percent_Discount DECIMAL(5, 2) NOT NULL,
  Name_Promotion NVarchar(50),
  Start_Date DATE NOT NULL,
  End_Date DATE NOT NULL,
  Code VARCHAR(20) NOT NULL
);

CREATE TABLE Orders
(
  ID_Order INT NOT NULL IDENTITY(1000,1) PRIMARY KEY,
  ID_Customer INT NOT NULL,
  Order_Date DATE NOT NULL,
  Total DECIMAL(10, 2) NOT NULL,
  Status NVARCHAR(20) NOT NULL,
  ID_Sale INT,
  FOREIGN KEY (ID_Customer) REFERENCES Customer(ID_Customer),
  FOREIGN KEY (ID_Sale) REFERENCES Promotion(ID_Sale)
);

CREATE TABLE Detail_Order
(
  ID_Detail_Order INT NOT NULL IDENTITY(1000,1) PRIMARY KEY,
  ID_Order INT NOT NULL,
  ID_Product INT NOT NULL,
  Quantity INT NOT NULL,
  Unit_Price DECIMAL(10, 2) NOT NULL,
  FOREIGN KEY (ID_Order) REFERENCES Orders(ID_Order)
);






